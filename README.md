# MeinCraft – Custom Programming Language Compiler (Java + ANTLR + LLVM)

MeinCraft is a simple interpreted language implemented in Java using ANTLR4. It supports basic data types, conditionals, loops, arrays, matrices, and LLVM IR code generation for execution via Clang. The project is primarily educational, showcasing compiler construction and code generation techniques.

This project was developed as part of a university course on interpreters and compilers. It focuses on:
- Lexical/syntactic parsing via ANTLR4
- Runtime interpretation and static LLVM code generation
- Simple type inference and runtime scope handling

## Features

- **Primitive Types**: `int`, `float`, `boolean`, `string`
- **Arrays & Matrices**: Nested list support (e.g. `[1, 2]`, `[[1,2], [3,4]]`)
- **Arithmetic Operations**: `+`, `-`, `*`, `/`
- **Boolean Logic**: `AND`, `OR`, `XOR`, `NEG`, including `true/false` and `1/0` interop
- **Comparisons**: `==` (equality check)
- **I/O Support**:
  - `read` – dynamically typed input (infers type)
  - `print` – formatted output based on value type
- **Control Flow**:
  - `if / elif / else` conditionals
  - Proper block scoping and label generation
- **LLVM Code Generation**:
  - Generates valid LLVM IR
  - Can be compiled and executed using `clang`
 
## Architecture
.mc source file
    ↓
ANTLR Lexer
    ↓
ANTLR Parser
    ↓
AST
    ↓
IRVisitor
(semantic analysis + scope resolution)
    ↓
IRGenerator
(LLVM IR emission)
    ↓
clang
    ↓
Native executable

## Requirements

- Java 17+
- [Clang](https://clang.llvm.org/) (to compile the generated `output.ll`)

## Most important components
- Lexer & Parser – generated by ANTLR4 from meincraft.g4
- IRVisitor – performs semantic analysis, scope handling, and runtime type validation
- IRGenerator – emits valid LLVM IR code
- Value / Type system – runtime representation of language values
- Scope management – implemented using a stack-based structure (Deque<Map<String, Value>>)

## Getting Started

1. **Generate the parser (if needed):**

   ```bash
   antlr4 -Dlanguage=Java -visitor meincraft.g4 -o gen

2. **Running the project:**
   ```bash
   ./make.ps1
   ```

   ```text
   This powershell file, compiles Java, and creates IR format: output.ll file, which is then used in command below in order to compile the .mc file
   ```

   ```bash
   .\meincraft.exe
   ```

3. **Examples:**
```text
Edit within example.mc file!

# IF statement: #
    
x = read;
if (x == 1) then:
  print("one");
elif (x == 2) then:
  print("two");
else:
  print("other");
end

# FOR loop: #

for (i = 0 to i = 3) do:
  print(i);
end

# Function: #

def add(a, b) as:
  return a + b;
end

x = add(3, 7);
print(x);

# Define Variables scope: #

x = 99;

def example() as:
  private x = 123;
  print(x);
end

example();
print(x);

# Structure: #

struct car:
  price = 10000;
  name = "volkswagen";
  owned = true;
end

print(car);
print(car.get(price));
tmp = car.set(price = 1234);
print(car.get(price));
```

## What I Learned ##
- Designing a full compilation pipeline (source → AST → IR → native)
- Implementing lexical scope resolution
- Managing runtime value representation
- Generating low-level LLVM IR code
- Structuring a multi-stage compiler architecture

